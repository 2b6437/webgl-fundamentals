<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ja/webgl-2d-rotation.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
    * Neither the name of Gregg Tavares. nor the names of his
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta property="og:title" content="WebGL二次元で回転すること" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://webglfundamentals.org/webgl/lessons/resources/webglfundamentals.jpg" />
<meta property="og:description" content="二次元で回転し方" />
<meta property="og:url" content="http://webglfundamentals.org//webgl/lessons/ja/webgl-2d-rotation.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@greggman" />
<meta name="twitter:creator" content="@greggman" />
<meta name="twitter:domain" content="webglfundamentals.org" />
<meta name="twitter:title" content="WebGL二次元で回転すること" />
<meta name="twitter:url" content="http://webglfundamentals.org//webgl/lessons/ja/webgl-2d-rotation.html" />
<meta name="twitter:description" content="二次元で回転し方" />
<meta name="twitter:image:src" content="http://webglfundamentals.org/webgl/lessons/resources/webglfundamentals.jpg" />


<title>WebGL二次元で回転すること</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/resources/base.css" type="text/css" />
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css" type="text/css" />
</head>
<body>
<div class="webgl_header">
  <h1><a href="/">WebGLFundamentals.org</a></h1>
</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL二次元で回転すること</h1>
  </div>
  <div class="row">
    <div class="col-sm-8 lesson-main">
      <p>本記事もWebGLシリーズの一つである。最初の記事は<a href="webgl-fundamentals.html">WebGLの基本</a>で、そして前回の記事は<a href="webgl-2d-translation.html">二次元で移動すること</a>についての記事である.</p>
<p>まず、上手く説明出来るかどうか分からないが、べすとを尽くしてみよう。</p>
<p>最初に「単位円」ということを紹介したいと思う。中学校で学んだ数学を思い出せば、
円形には半径がある。
（寝てしまわないで！）。円形の半径は円の真ん中点から円周までの距離である。
「単位円」は半径が1.0を１とした円である。</p>
<p>これは単位円である。</p>
<p><div>
  <iframe class="webgl_example " style="width: 300px; height: 300px;" src="/webgl/lessons/../unit-circle.html"></iframe>
</div>

</p>
<p>青いハンドルを操作したらXとYの値が変わることに注目して下さい。
それは円周の位置を表している。
真上はYが１でXが0である。真右ならXが１でYが0になる。</p>
<p>小学校の数学を思い出せば、何かに1を掛けるとその数字と同じになる。例えば123ｘ１＝123である。
それは結構常識であるだろう？さて、単位円は、半径が１の円で特別な「１」の種類である。
それは回転している１である。だから１に掛けるように何かに単位円を掛けると魔法のように回転してくる。</p>
<p><a href="webgl-2d-translation.html">前回のサンプル</a>の図形頂点を単位円のXとYに掛けよう！</p>
<p>これは更新された頂点シェーダーである。</p>
<pre><code>&lt;script id=&quot;2d-vertex-shader&quot; type=&quot;x-shader/x-vertex&quot;&gt;
attribute vec2 a_position;

uniform vec2 u_resolution;
uniform vec2 u_translation;
+uniform vec2 u_rotation;  // 単位円の円周位置

void main() {
+  // 位置を回転する
+  vec2 rotatedPosition = vec2(
+     a_position.x * u_rotation.y + a_position.y * u_rotation.x,
+     a_position.y * u_rotation.y - a_position.x * u_rotation.x);

  // 移動距離を足す
*  vec2 position = rotatedPosition + u_translation;
</code></pre><p>そしてJavaScriptをその２つの値を設定出来るように更新する。</p>
<pre><code>  ...

+  var rotationLocation = gl.getUniformLocation(program, &quot;u_rotation&quot;);

  ...

+  var rotation = [0, 1];

  ...

  // シーンを描画する。
  function drawScene() {

    ...

    // 移動距離を設定する。
    gl.uniform2fv(translationLocation, translation);

+    // 回転差を設定する。
+    gl.uniform2fv(rotationLocation, rotation);

    // 図形を描画する。
    var primitiveType = gl.TRIANGLES;
    var offset = 0;
    var count = 18;  // ６三角形、三角形ごとに３頂点
    gl.drawArrays(primitiveType, offset, count);
  }
</code></pre><p>そしてここがその結果である。回転するために単位円のハンドルを操作して、
移動するためにスライダを使ってみよう。</p>
<p><div>
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-geometry-rotation.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/..%2Fwebgl-2d-geometry-rotation.html" target="_blank">クリックして別のウインドウを開く</a>
</div>

</p>
<p>何でこういう結果が出るか？計算式を見て下さい。</p>
<pre><code>rotatedX = a_position.x * u_rotation.y + a_position.y * u_rotation.x;
rotatedY = a_position.y * u_rotation.y - a_position.x * u_rotation.x;
</code></pre><p>回転したい四角形があることを想像しよう。回転する前に右上の頂点は3.0,9.0である。
単位円の真上から右回り３０度の位置を選ぼう。</p>
<p><img src="../../resources/rotate-30.png" class="webgl_center" /></p>
<p>この単位円の円周の位置は0.50と0.87である。</p>
<pre class="webgl_center">
   3.0 * 0.87 + 9.0 * 0.50 = 7.1
   9.0 * 0.87 - 3.0 * 0.50 = 6.3
</pre>

<p>これが回転する為に必要な値になってくる！</p>
<p><img src="../../resources/rotation-drawing.svg" width="500" class="webgl_center"/></p>
<p>６０度も同じようにしてみよう。</p>
<p><img src="../../resources/rotate-60.png" class="webgl_center" /></p>
<p>この単位円の円周の位置は0.87と0.50</p>
<pre class="webgl_center">
   3.0 * 0.50 + 9.0 * 0.87 = 9.3
   9.0 * 0.50 - 3.0 * 0.87 = 1.9
</pre>

<p>その単位円の円周の位置を右回りに移動するとXが大きくなって、Yが小さくなる。９０度を過ぎたら
Xが小さくなって、Yが大きくなって行く。そのパターンで回転出来る。</p>
<p>単位円の円周の位置は別の名前がある。
それは正弦(sine)と余弦(cosine)と呼ばれていることである。
どんな角度でもその角度の正弦と余弦はこのように調べられる。</p>
<pre><code>function printSineAndCosineForAnAngle(angleInDegrees) {
  var angleInRadians = angleInDegrees * Math.PI / 180;
  var s = Math.sin(angleInRadians);
  var c = Math.cos(angleInRadians);
  console.log(&quot;s = &quot; + s + &quot; c = &quot; + c);
}
</code></pre><p>そのコードをJavaScriptコンソルにコピーとペーストして、そして
<code>printSineAndCosineForAngle(30)</code>を入力したら<code>s = 0.49 c = 0.87</code>を
表示して来る。(note:値を四捨五入した。)</p>
<p>それを組み合わせたら、どんな角度でも図形を回転出来るようになる。
<code>rotation</code>を希望の角度の正弦と余弦に設定するだけである.</p>
<pre><code>  ...
  var angleInRadians = angleInDegrees * Math.PI / 180;
  rotation[0] = Math.sin(angleInRadians);
  rotation[1] = Math.cos(angleInRadians);
</code></pre><p>これは角度しかない版である。移動と回転するためにスライダを操作してみよう。</p>
<p><div>
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-geometry-rotation-angle.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/..%2Fwebgl-2d-geometry-rotation-angle.html" target="_blank">クリックして別のウインドウを開く</a>
</div>

</p>
<p>ここまで良い説明だったかな〜。。。
これは一般的な回転する方法じゃないのでまだ読み続けて下さい。
２つ後の記事でそれにたどり着く。<a href="webgl-2d-scale.html">次はもっと簡単なこと、拡大と縮小のし方である</a>.</p>
<div class="webgl_bottombar"><h3>ラジアンは何？</h3>
<p>
ラジアンは円と回転とアングル計る単位である。距離がインチとか、センチとか、メートルなどで
計れるのと同じように、アングルは角度とラジアンの単位で計れる。
</p>
<p>
You're probably aware that math with metric measurements is easier than math with imperial measurements. To go from inches to feet we divide by 12. To go from inches to yards we divide by 36. I don't know about you but I can't divide by 36 in my head. With metric it's much easier. To go from millimeters to centimeters we divide by 10. To go from millimeters to meters we divide by 1000. I **can** divide by 1000 in my head.
</p>
<p>
ラジアンと角度は同じようなものである。角度の方が難しくなる。
円を角度で計ると３６０度あるが、
ラジアンで計ると2πラジアンになる。
一周は2πラジアンである。半周転は1πラジアンである。１/４の一周は1/2πラジアンである。９０度を回転したければ<code>Math.PI * 0.5</code>を使えばいいとか、 4５度なら<code>Math.PI * 0.25</code>を使うなど。
</p>
<p>
アングル数学はほとんどラジアンを使えば簡単になるので、ラジアンで考えてみよう！
UI以外ラジアンを使うべきである。
</p>
</div>



      <hr class="lesson-comment-sep" />
      <div class="lesson-comments">
        <div>質問? <a href="http://stackoverflow.com/questions/tagged/webgl">stackoverflowで質問(英語)</a>.</div>
        <div>問題点/バグ? <a href="http://github.com/greggman/webgl-fundamentals/issues">githubでissueを作成</a>.</div>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL二次元で回転すること';
            var disqus_title = 'WebGL二次元で回転すること';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <div class="col-sm-3 col-sm-offset-1 lesson-sidebar">
        <select id="language">
</select>

        <ul>
  <li>基本</li>
  <ul>
    <li><a href="/webgl/lessons/ja/webgl-fundamentals.html">WebGLの基本</a></li>
    <li><a href="/webgl/lessons/webgl-how-it-works.html">WebGL How It Works(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-shaders-and-glsl.html">WebGL Shaders and GLSL(英語)</a></li>
  </ul>
  <li>Image Processing</li>
  <ul>
    <li><a href="/webgl/lessons/ja/webgl-image-processing.html">WebGLにおける画像処理</a></li>
    <li><a href="/webgl/lessons/ja/webgl-image-processing-continued.html">WebGLにおける画像処理。続き</a></li>
  </ul>
  <li>2D translation, rotation, scale, matrix math</li>
  <ul>
    <li><a href="/webgl/lessons/ja/webgl-2d-translation.html">WebGL - 二次元での移動</a></li>
    <li><a href="/webgl/lessons/ja/webgl-2d-rotation.html">WebGL - 二次元での回転</a></li>
    <li><a href="/webgl/lessons/ja/webgl-2d-scale.html">WebGL - 二次元での拡大縮小</a></li>
    <li><a href="/webgl/lessons/ja/webgl-2d-matrices.html">WebGL - 二次元での行列数学</a></li>
  </ul>
  <li>3D</li>
  <ul>
    <li><a href="/webgl/lessons/ja/webgl-3d-orthographic.html">WebGL三次元の正投影</a></li>
    <li><a href="/webgl/lessons/ja/webgl-3d-perspective.html">WebGL三次元透視投影</a></li>
    <li><a href="/webgl/lessons/webgl-3d-camera.html">WebGL 3D - Cameras(英語)</a></li>
  </ul>
  <li>Lighting</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-3d-lighting-directional.html">WebGL 3D - Directional Lighting(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-3d-lighting-point.html">WebGL 3D - Point Lighting(英語)</a></li>
  </ul>
  <li>Structure and Organization</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-less-code-more-fun.html">WebGL - Less Code, More Fun(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-drawing-multiple-things.html">WebGL - Drawing Multiple Things(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-scene-graph.html">WebGL - Scene Graphs(英語)</a></li>
  </ul>
  <li>Textures</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-3d-textures.html">WebGL 3D - Textures(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-2-textures.html">WebGL - Using 2 or More Textures(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-cors-permission.html">WebGL - Cross Origin Images(英語)</a></li>
  </ul>
  <li>Techniques</li>
  <ul>
    <li>2D</li>
    <ul>
      <li><a href="/webgl/lessons/webgl-2d-drawimage.html">WebGL 2D - DrawImage(英語)</a>
      <li><a href="/webgl/lessons/webgl-2d-matrix-stack.html">WebGL 2D - Matrix Stack(英語)</a>
    </ul>
    <li>Text</li>
    <ul>
      <li><a href="/webgl/lessons/webgl-text-html.html">WebGL Text - HTML(英語)</a>
      <li><a href="/webgl/lessons/webgl-text-canvas2d.html">WebGL Text - Canvas 2D(英語)</a>
      <li><a href="/webgl/lessons/webgl-text-texture.html">WebGL Text - Using a Texture(英語)</a>
      <li><a href="/webgl/lessons/webgl-text-glyphs.html">WebGL Text - Using a Glyph Texture(英語)</a>
    </ul>
  </ul>
  <li>Misc</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-setup-and-installation.html">WebGL Setup And Installation(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-boilerplate.html">WebGL Boilerplate(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-resizing-the-canvas.html">WebGL Resizing the Canvas(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-animation.html">WebGL - Animation(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-and-alpha.html">WebGL and Alpha(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-2d-vs-3d-library.html">WebGL - 2D vs 3D libraries(英語)</a></li>
    <li><a href="/webgl/lessons/webgl-anti-patterns.html">WebGL - Anti-Patterns(英語)</a></li>
  </ul>
</ul>
<ul>
  <li><a href="/docs/">Helper API Docs(英語)</a></li>
  <li><a href="http://twgljs.org">TWGL, A tiny WebGL helper library</a></li>
  <li><a href="https://github.com/greggman/webgl-fundamentals">github</a></li>
</ul>

    </div>
  </div>
</div>
</body>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js"></script>
<script src="/langdb.js"></script>
<script src="/webgl/lessons/resources/languages.js"></script>
<script src="//cdn.webglstats.com/stat.js" defer="defer" async="async"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59804936-1', 'auto');
  ga('send', 'pageview');

</script>


</html>



