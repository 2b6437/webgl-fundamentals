<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/pt-br/webgl-and-alpha.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of Gregg Tavares. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="pt-br">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta property="og:title" content="WebGL e Alpha" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://webglfundamentals.org/webgl/lessons/resources/webglfundamentals.jpg" />
<meta property="og:description" content="Como o alpha no WebGL é diferente do alpha no OpenGL" />
<meta property="og:url" content="http://webglfundamentals.org/webgl/lessons/pt-br/webgl-and-alpha.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@greggman" />
<meta name="twitter:creator" content="@greggman" />
<meta name="twitter:domain" content="webglfundamentals.org" />
<meta name="twitter:title" content="WebGL e Alpha" />
<meta name="twitter:url" content="http://webglfundamentals.org/webgl/lessons/pt-br/webgl-and-alpha.html" />
<meta name="twitter:description" content="Como o alpha no WebGL é diferente do alpha no OpenGL" />
<meta name="twitter:image:src" content="http://webglfundamentals.org/webgl/lessons/resources/webglfundamentals.jpg" />


<title>WebGL e Alpha</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css" type="text/css" />
</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-and-alpha.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-and-alpha.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-and-alpha.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-and-alpha.html" >한국어</a>
    <option value="/webgl/lessons/pl/webgl-and-alpha.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-and-alpha.html" selected>Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-and-alpha.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-and-alpha.html" >简体中文</a>
</select>


    <a href="#toc">Table of Contents</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/pt-br/">WebGLFundamentals.org</a></h1>
</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL e Alpha</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>Eu notei que alguns desenvolvedores do OpenGL têm problemas com a forma como o WebGL
trata alfa no backbuffer (ou seja, a tela), então pensei que poderia ser bom analisar
algumas das diferenças entre o WebGL e OpenGL relacionado ao alfa.</p>
<p>A maior diferença entre o OpenGL eo WebGL é que o OpenGL torna um backbuffer que não está composto com nada,
ou efetivamente não está composta de nada pela janela do sistema operacional
gerente, então não importa o que é o seu alfa.</p>
<p>O WebGL é composto pelo navegador com a página web e o
o padrão é usar o alpha pré-multiplicado o mesmo que .png <code>&lt;img&gt;</code>
tags com transparência e tags de tela 2D.</p>
<p>O WebGL tem várias maneiras de tornar isso mais parecido com o OpenGL.</p>
<h3 id="-1-diga-ao-webgl-que-voc-deseja-que-ele-seja-composto-com-alfa-n-o-premultiplicado">#1) Diga ao WebGL que você deseja que ele seja composto com alfa não premultiplicado</h3>
<pre class="prettyprint"><code>gl = canvas.getContext(&quot;webgl&quot;, {
  premultipliedAlpha: false  // Ask for non-premultiplied alpha
});
</code></pre><p>O padrão é verdadeiro.</p>
<p>Claro que o resultado ainda será composto na página com o que for
A cor do fundo acaba sendo debaixo da tela (o fundo da tela
cor, a cor do fundo do recipiente da tela, o plano de fundo da página
cor, o material por trás da tela se a tela tiver um índice z&gt; 0, etc ....)
em outras palavras, a cor CSS define para essa área da página.</p>
<p>Uma boa maneira de encontrar se você tiver algum problema alfa é configurar o
fundo da tela para uma cor brilhante como o vermelho. Você verá imediatamente
o que está acontecendo.</p>
<pre class="prettyprint"><code>&lt;canvas style=&quot;background: red;&quot;&gt;&lt;canvas&gt;
</code></pre><p>Você também pode configurá-lo em preto, o que irá ocultar quaisquer problemas alfa que você tenha.</p>
<h3 id="-2-diga-ao-webgl-que-voc-n-o-quer-alfa-no-backbuffer">#2) Diga ao WebGL que você não quer alfa no backbuffer</h3>
<pre class="prettyprint"><code>gl = canvas.getContext(&quot;webgl&quot;, { alpha: false }};
</code></pre><p>Isso fará com que ele atue mais como o OpenGL, já que o backbuffer só terá
RGB. Esta é provavelmente a melhor opção porque um bom navegador pode ver que
você não tem alfa e realmente otimiza a forma como o WebGL é composto. Claro
que isso também significa que na verdade não terá alfa no backbuffer, então, se você estiver
usando alpha no backbuffer para algum propósito que pode não funcionar para você.
Poucos aplicativos que eu conheço usam alpha no backbuffer. Eu penso que isso deveria ter sido o padrão.</p>
<h3 id="-3-limpe-o-alpha-no-final-da-sua-renderiza-o">#3) Limpe o Alpha no final da sua renderização</h3>
<pre class="prettyprint"><code>..
renderScene();
..
// Set the backbuffer&#39;s alpha to 1.0
gl.clearColor(1, 1, 1, 1);
gl.colorMask(false, false, false, true);
gl.clear(gl.COLOR_BUFFER_BIT);
</code></pre><p>A limpeza é geralmente muito rápida, pois há um caso especial para ela na maioria dos
hardware&#39;s. Eu fiz isso na maioria das minhas demonstrações. Se eu fosse inteligente, eu mudaria para
Método #2 acima. Talvez eu faça isso logo depois de publicar isso. Parece que
A maioria das bibliotecas WebGL deve ser padrão para este método. Esses poucos desenvolvedores
que realmente estão usando alfa para efeitos de composição podem pedir isso. o
O resto apenas obterá o melhor desempenho e as menos surpresas.</p>
<h3 id="-4-climpe-o-alfa-uma-vez-ent-o-n-o-fa-a-mais-nada">#4) CLimpe o alfa uma vez, então não faça mais nada</h3>
<pre class="prettyprint"><code>// At init time. Clear the back buffer.
gl.clearColor(1,1,1,1);
gl.clear(gl.COLOR_BUFFER_BIT);

// Turn off rendering to alpha
gl.colorMask(true, true, true, false);
</code></pre><p>Claro que, se você estiver processando seus próprios quadros, você precisará
transformar a renderização para o alfa de volta e depois desligá-lo novamente
quando você alternar torender para a tela.</p>
<h3 id="-5-lidando-com-imagens">#5) Lidando com Imagens</h3>
<p>Meu padrão se você estiver carregando imagens com alfa no WebGL. O WebGL fornecerá
os valores como estão no arquivo PNG com valores de cor não premultiplicados.
Isso geralmente é o que eu estou acostumado com os programas OpenGL porque é sem
perdas, enquanto o pré-multiplicado é com perdas.</p>
<pre class="prettyprint"><code>1, 0.5, 0.5, 0  // RGBA
</code></pre><p>É um valor possível sem premultiplicado, enquanto pré-multiplicado é um valor
impossível porque <code>a = 0 &#39;que significa&#39; r</code>,<code>g</code> e <code>b</code> devem ser zero.</p>
<p>Você pode ter o WebGL pré-multiplicar o alfa se desejar. Você faz isso
configurando <code>UNPACK_PREMULTIPLY_ALPHA_WEBGL</code> para verdadeiro assim</p>
<pre class="prettyprint"><code>gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);
</code></pre><p>O padrão não é premultiplicado.</p>
<p>Esteja ciente de que a maioria, se não todas as implementações do Canvas 2D,
funcionam com alfa pré-multiplicado. Isso significa que quando você os transfere
para o WebGL e <code>UNPACK_PREMULTIPLY_ALPHA_WEBGL</code> é falso, o WebGL irá convertê-lo
de novo para não premultipilado.</p>
<h3 id="-6-usando-uma-equa-o-de-mistura-que-funciona-com-alfa-pr-multiplicada-">#6) Usando uma equação de mistura que funciona com alfa pré-multiplicada.</h3>
<p>Quase todas as aplicações OpenGL que escrevi ou trabalharam no uso</p>
<pre class="prettyprint"><code>gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
</code></pre><p>Isso funciona para texturas alfa não pré-multiplicadas.</p>
<p>Se você realmente quiser trabalhar com texturas alfa pré-multiplicadas, então você provavelmente quer</p>
<pre class="prettyprint"><code>gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
</code></pre><p>Esses são os métodos que conheço. Se você souber de mais, por favor, publique-os abaixo.</p>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-and-alpha.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-and-alpha.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-and-alpha.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-and-alpha.html" >한국어</a>
    <option value="/webgl/lessons/pl/webgl-and-alpha.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-and-alpha.html" selected>Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-and-alpha.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-and-alpha.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>Fundamentos</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-fundamentals.html">Fundamentals</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-how-it-works.html">How It Works</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-shaders-and-glsl.html">Shaders and GLSL</a></li>
        </ul>
  <li>Tratamento de imagens</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-image-processing.html">Image Processing</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-image-processing-continued.html">Image Processing Continued</a></li>
        </ul>
  <li>2D: translação, rotação, escala, matriz matemática</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-2d-translation.html">2D Translation</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-2d-rotation.html">2D Rotation</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-2d-scale.html">Escala 2D WebGL</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-2d-matrices.html">2D Matrices</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-3d-orthographic.html">Orthographic 3D</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-3d-perspective.html">3D Perspective</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-3d-camera.html">3D Cameras</a></li>
        </ul>
  <li>Iluminação</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-3d-lighting-directional.html">Directional Lighting</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-3d-lighting-point.html">Point Lighting</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-3d-lighting-spot.html">Spot Lighting</a></li>
        </ul>
  <li>Estrutura e Organização</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-less-code-more-fun.html">Less Code, More Fun</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-drawing-multiple-things.html">Drawing Multiple Things</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-scene-graph.html">Scene Graphs</a></li>
        </ul>
  <li>Geometria</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-3d-geometry-lathe.html">Geometry - Lathe</a></li>
        </ul>
  <li>Texturas</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-3d-textures.html">Textures</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-data-textures.html">Data Textures</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-2-textures.html">WebGL - Usando duas ou mais texturas</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-cors-permission.html">Cross Origin Images</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-3d-perspective-correct-texturemapping.html">Perspective Correct Texture Mapping</a></li>
        </ul>
  <li>Renderizando texturas</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-render-to-texture.html">Render to Texture</a></li>
        </ul>
  <li>Técnicas</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-2d-drawimage.html">2D - DrawImage</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-2d-matrix-stack.html">2D - Matrix Stack</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-cube-maps.html">Cubemaps</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-environment-maps.html">Environment maps</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-skybox.html">Skyboxes</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-skinning.html">Skinning</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-fog.html">Fog</a></li>
        </ul>
  <li>Texto</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-text-html.html">Text - HTML</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-text-canvas2d.html">Texto WebGL - Telas 2D</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-text-texture.html">Text - Using a Texture</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-text-glyphs.html">Text - Using a Glyph Texture</a></li>
        </ul>
        </ul>
  <li>Tips</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-smallest-programs.html">Smallest Programs</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-drawing-without-data.html">Drawing Without Data</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-pulling-vertices.html">Pulling Vertices</a></li>
        </ul>
  <li>Diversos</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-setup-and-installation.html">WebGL - Setup e instalação</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-boilerplate.html">Boilerplate</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-resizing-the-canvas.html">Resizing the Canvas</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-animation.html">WebGL - Animação</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-and-alpha.html">WebGL e canal Alpha</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-2d-vs-3d-library.html">2D vs 3D libraries</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-anti-patterns.html">Anti-Patterns</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-matrix-vs-math.html">WebGL Matrices vs Math Matrices</a></li>
        </ul>
  <li>Reference</li>
        <ul>
          <li><a href="/webgl/lessons/pt-br/webgl-attributes.html">Attributes</a></li>
<li><a href="/webgl/lessons/pt-br/webgl-texture-units.html">Texture Units</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">Ajudante de API dos DOCs</a></li>
  <li><a href="http://twgljs.org">TWGL, uma pequena biblioteca ajudante do WebGL</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl-fundamentals">github</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        <div>Questions? <a href="http://stackoverflow.com/questions/tagged/webgl">Ask on stackoverflow</a>.</div>
        <div>Issue/Bug? <a href="http://github.com/gfxfundamentals/webgl-fundamentals/issues">Create an issue on github</a>.</div>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL e Alpha';
            var disqus_title = 'WebGL e Alpha';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js"></script>
<script src="//cdn.webglstats.com/stat.js" defer="defer" async="async"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59804936-1', 'auto');
  ga('send', 'pageview');

</script>


</html>



